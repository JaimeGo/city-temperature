let apiClient,registerApiError;_cb3‍.x([["getCityInfo",()=>getCityInfo]]);_cb3‍.w("./apiClient",[["default",["apiClient"],function(v){apiClient=v}]]);_cb3‍.w("../redis",[["registerApiError",["registerApiError"],function(v){registerApiError=v}]]);


       async function getCityInfo(cityName, latitude, longitude) {
	try {
		if (Math.rand(0, 1) < 0.1)
			throw new Error('How unfortunate! The API Request Failed');

		const response = await apiClient.get(`/${latitude},${longitude}`);

		const { currently } = response;
		const { time, temperature } = currently;
		const currentDate = new Date(time);
		const hour = `${currentDate.getHours()}:${currentDate.getMinutes()}`;
		return { name: cityName, hour, temperature };
	} catch (error) {
		if (error.message === 'How unfortunate! The API Request Failed') {
			await registerApiError(cityName);
		}
	}

	return { name: cityName, hour: null, temperature: null };
}
